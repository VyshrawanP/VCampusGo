<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Student Utility Portal</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <!-- Google Fonts — Plus Jakarta Sans for the orange theme -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="css/styledev.css">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZS6HZLVNJD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZS6HZLVNJD');
  </script>
</head>

<body>

  <!-- ================= STICKY HEADER WITH THEME TOGGLE ================= -->
  <div class="sticky-header" id="stickyHeader">
    <div class="header-content">
      <div class="logo">
        VCampusGo
        <a href="https://vyshrawan-portfolio.vercel.app/" target="_blank" rel="noopener noreferrer" style="font-size:10px;font-weight:500;color:var(--text-muted);letter-spacing:0.02em;margin-left:6px;opacity:0.75;text-decoration:none;transition:opacity 0.2s ease;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.75'">by Vyshrawan P</a>
      </div>

      <nav class="desktop-nav">
        <a href="#faculty">Faculty</a>
        <a href="#mess">Mess Menu</a>
        <a href="/cgpa.html">CGPA Calculator</a>
        <a href="https://ripdspace.netlify.app/" target="_blank">PYQs</a>
      </nav>

      <div class="header-controls">
        <button class="theme-toggle" id="themeToggle">
          <i class="fas fa-moon"></i>
        </button>
        <button class="menu-btn" id="menuBtn">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">
      <a href="#faculty">Faculty</a>
      <a href="#mess">Mess Menu</a>
      <a href="/cgpa.html">CGPA Calculator</a>
      <a href="https://ripdspace.netlify.app/" target="_blank">PYQs</a>
    </div>
  </div>


  <!-- ================= HEADER / FACULTY FINDER ================= -->
  <header class="header" id="faculty">
    <div class="title-things">
      <h1>VCampusGo</h1>
    </div>

    <p class="subtitle">
      An unofficial student-to-student helper — built only to make campus life easier.
    </p>

    <h4>Find Your Faculty</h4>

    <div class="search-container">
      <i class="fas fa-magnifying-glass"></i>
      <input
        type="text"
        id="facultySearch"
        placeholder="Search by name or department…"
        autocomplete="off"
      />
    </div>
  </header>


  <!-- ================= FACULTY RESULTS ================= -->
  <main class="main-content">
    <section class="faculty-section">
      <div id="facultyResults" class="faculty-grid">
        <!-- Faculty cards injected via faculty.js -->
      </div>
    </section>

    <h2>More Utilities</h2>

    <!-- ================= MESS MENU ================= -->
    <section class="mess-section" id="mess">
      <h2>Today's Mess Menu</h2>
      <p id="messMeta" class="mess-meta"></p>

      <div class="hostel-control">
        <span class="hostel-label">Hostel</span>
        <select id="hostelSelect" class="hostel-dropdown">
          <option value="mh">Men's Hostel</option>
          <option value="lh">Ladies Hostel</option>
        </select>
        <script>
          document.getElementById("hostelSelect").addEventListener("change", function() {
            if (this.value === "lh") {
              window.location.href = "https://vcampusgolh.vercel.app";
            }
          });
        </script>
      </div>

      <div id="messCards" class="mess-grid">
        <!-- Meal cards injected via mess.js -->
      </div>

      <button id="notifyBtnMH" class="notify-btn">
        <i class="fas fa-bell"></i> Enable meal notifications for MH
      </button>

      <!-- LH FCM -->
      <script type="module">
        import { subscribeV2 } from './fcm-lh.js';
        window.subscribeLH = () => subscribeV2('LH');
      </script>

      <!-- MH VAPID Key -->
      <script>
        window.VAPID_KEY = "BM5wUA5jgGX0uv8ZXqfA3P5V7GM_TiRJ-JxyOq0r5yEygpO8Rdr29vdZrwHelY1BYtzQZ_ix3SypJ30bbaT80Tg";
      </script>
      <script type="module" src="/js/fcm-lh.js"></script>

      <script>
        window.VAPID_KEY = "BM5wUA5jgGX0uv8ZXqfA3P5V7GM_TiRJ-JxyOq0r5yEygpO8Rdr29vdZrwHelY1BYtzQZ_ix3SypJ30bbaT80Tg";
      </script>
      <script type="module" src="/js/fcm.js"></script>
    </section>


    <!-- ================= UTILITY CARDS ================= -->
    <div class="visual-grid">
      <a href="https://ripdspace.netlify.app/" class="visual-card" target="_blank">
        <i class="fas fa-book-open"></i>
        <h3>Previous Year Papers</h3>
        <p>Question papers organised by subject and semester to help you prepare better.</p>
        <span class="card-arrow">Browse PYQs <i class="fas fa-arrow-right" style="font-size:11px"></i></span>
      </a>

      <a href="/cgpa.html" class="visual-card">
        <i class="fas fa-calculator"></i>
        <h3>CGPA Calculator</h3>
        <p>Calculate your cumulative GPA across semesters quickly and accurately.</p>
        <span class="card-arrow">Open Calculator <i class="fas fa-arrow-right" style="font-size:11px"></i></span>
      </a>
    </div>
  </main>


  <!-- ================= FOOTER ================= -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-left">
        <p class="footer-name">Developed by <strong>Vyshrawan P</strong></p>
        <p class="footer-sub">Student project · Unofficial · Not affiliated with the university</p>
      </div>
      <div class="footer-links">
        <a href="https://www.linkedin.com/in/vyshrawan-p-795b5b256/" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-linkedin"></i> LinkedIn
        </a>
        <a href="https://github.com/VyshrawanP" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-github"></i> GitHub
        </a>
      </div>
    </div>
  </footer>


  <!-- ================= JS ================= -->
  <script src="js/faculty.js"></script>
  <script src="js/mess.js"></script>
  <script src="js/main.js"></script>

  <script>
    // ── Theme Toggle ──────────────────────────────────────
    const themeToggle = document.getElementById("themeToggle");
    const themeIcon   = themeToggle.querySelector("i");

    if (localStorage.getItem("theme") === "dark") {
      document.body.classList.add("dark");
      themeIcon.classList.replace("fa-moon", "fa-sun");
    }

    themeToggle.onclick = () => {
      document.body.classList.toggle("dark");
      themeToggle.classList.add("rotate");
      const isDark = document.body.classList.contains("dark");
      themeIcon.classList.toggle("fa-moon", !isDark);
      themeIcon.classList.toggle("fa-sun",   isDark);
      localStorage.setItem("theme", isDark ? "dark" : "light");
      setTimeout(() => themeToggle.classList.remove("rotate"), 600);
    };

    // ── Mobile Menu ───────────────────────────────────────
    const menuBtn      = document.getElementById("menuBtn");
    const stickyHeader = document.getElementById("stickyHeader");
    const mobileNav    = document.getElementById("mobileNav");

    menuBtn.onclick = () => {
      stickyHeader.classList.toggle("open");
      const isOpen = stickyHeader.classList.contains("open");
      menuBtn.querySelector("i").classList.toggle("fa-bars",  !isOpen);
      menuBtn.querySelector("i").classList.toggle("fa-times",  isOpen);
    };

    mobileNav.querySelectorAll("a").forEach(link => {
      link.onclick = () => {
        stickyHeader.classList.remove("open");
        menuBtn.querySelector("i").classList.replace("fa-times", "fa-bars");
      };
    });
  </script>

  <script defer src="/_vercel/analytics/script.js"></script>
</body>
</html>
